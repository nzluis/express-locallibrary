<% layout('layout') -%>
<h1><%=title%>: <%=book.title%></h1>

<p><%=book.author.name%></p>

<% if (bookinstance.length) {%>
    <p><strong>Delete the following instances before attempting to delete this book.</strong></p>
    <div style="margin-left:20px;margin-top:20px">
        <h4>Instances</h4>
        <dl>
            <%for(const instance of bookinstance) {%>
                <dt><a href="<%=instance.url%>"><%=instance.status%></a>  
                    <% if (instance.status != 'Available') { %>
                        (Due: <%= instance.due_back_formatted %>)
                    <% } %>
                </dt>
            <%}%>
        </dl>
    </div>
<%} else {%>
    <p>Do you really want to delete this Book?</p>
    <form action="" method="post">
        <div class="form-group mb-2">
            <input type="hidden" name="bookid" id="bookid" class="form-control" required="true" value="<%=book._id%>">
            <button type="submit" class="btn btn-primary">Delete</button>
        </div>
    </form>
<%}%>